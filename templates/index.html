{% extends "base.html" %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞{% endblock %}

{% block left %}
<h5 class="mb-3">üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h5>
<form action="/start" method="get" class="mb-2">
    <button type="submit" class="btn btn-primary w-100">‚ñ∂Ô∏è Start</button>
</form>

<div class="mt-2">
    <span class="badge bg-success me-2">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {{ sent or 0 }}</span>
    <span class="badge bg-warning text-dark">–û–∂–∏–¥–∞–µ—Ç: {{ pending or 0 }}</span>
</div>

{% if message %}
<p class="mt-2 text-info">{{ message }}</p>
{% endif %}
{% if error %}
<p class="mt-2 text-danger">–û—à–∏–±–∫–∞: {{ error }}</p>
{% endif %}
{% if sent_message %}
<p class="mt-2 text-success">{{ sent_message }}</p>
{% endif %}
{% endblock %}

{% block right %}
<h5 class="mb-3">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h5>

<form action="/upload" method="post" enctype="multipart/form-data" class="mb-3">
    <label class="form-label">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
    <div class="input-group">
        <input type="file" name="file" class="form-control" required>
        <button type="submit" class="btn btn-success">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
    </div>
</form>

<form action="/text" method="post" class="mb-3">
    <label class="form-label">üí¨ –í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</label>
    <div class="input-group">
        <input type="text" name="text" class="form-control" required>
        <button type="submit" class="btn btn-success">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
    </div>
</form>

<form action="/reset_statuses" method="get" class="mb-4">
    <button type="submit" class="btn btn-danger w-100">üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã</button>
</form>

<form action="/" method="post" id="categoryForm">
    <label for="categorySelect" class="form-label">üìÇ –í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:</label>
    <select name="category" id="categorySelect" class="form-select" required
        onchange="document.getElementById('categoryForm').submit()">
        <option value="" disabled {% if not selected_category %}selected{% endif %}>-- –≤—ã–±–µ—Ä–∏ --</option>
        {% for cat in categories %}
        <option value="{{ cat }}" {% if cat==selected_category %}selected{% endif %}>{{ cat }}</option>
        {% endfor %}
    </select>
</form>
{% endblock %}

{% block picture %}
{% if image_url %}
<div class="text-center">
    <img src="{{ image_url }}" alt="Uploaded Image" class="img-fluid rounded shadow mb-3" style="max-height: 400px;">
</div>
{% endif %}

<div class="d-flex justify-content-center gap-2 mt-2">
    <form action="/next" method="get">
        <button type="submit" class="btn btn-outline-primary">–°–ª–µ–¥—É—é—â–µ–µ</button>
    </form>
    <form action="/save_image" method="post">
        <button type="submit" class="btn btn-outline-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </form>
    <form action="/delete_image" method="post">
        <button type="submit" class="btn btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</button>
    </form>
</div>
{% endblock %}

{% block phone %}
{% if numbers %}
<h6 class="mt-2">üì± –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞:</h6>
<ol class="list-group list-group-numbered overflow-auto" style="max-height: 420px;">
    {% for contact in numbers %}
    <li class="list-group-item small">

        {% if contact.status == "sent" %}
        ‚úÖ
        {% elif contact.status == "pending" %}
        ‚è≥
        {% elif contact.status == "error" %}
        ‚ùå
        {% else %}
        ‚ùî
        {% endif %}
        {% if contact.name %} 
            {{contact.name }}
        {% else %}
            –ë–µ–∑ –∏–º–µ–Ω–∏ 
        {% endif %}
        {{ contact.number }}
    </li>
    {% endfor %}
</ol>
{% endif %}
{% endblock %}